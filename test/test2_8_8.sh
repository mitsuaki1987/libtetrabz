#!/bin/sh

cat > test.in <<EOF
2 8 8
EOF

${MPIRUN} ./test.x < test.in > test.out

cat > test.out.ref <<EOF
#          Ideal          Result
# libtetrabz_occ
         0.25133E+01    0.25028E+01
         0.44429E+00    0.43994E+00

# libtetrabz_fermieng
         0.50000E+00    0.50086E+00
         0.25133E+01    0.25136E+01
         0.44429E+00    0.44385E+00

# libtetrabz_dos
         0.10053E+00    0.79273E-01
         0.80425E+00    0.85871E+00
         0.27143E+01    0.26242E+01
         0.64340E+01    0.65716E+01
         0.12566E+02    0.12500E+02
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.65827E+00    0.70796E+00
         0.44429E+01    0.45276E+01

# libtetrabz_intdos
         0.80425E-03    0.47294E-03
         0.25736E-01    0.26509E-01
         0.19543E+00    0.19294E+00
         0.82355E+00    0.83124E+00
         0.25133E+01    0.25028E+01
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.18431E-01    0.18675E-01
         0.44429E+00    0.43994E+00

# libtetrabz_dblstep
         0.48106E+00    0.48024E+00
         0.00000E+00    0.00000E+00
         0.12428E+00    0.12259E+00
         0.00000E+00    0.00000E+00

# libtetrabz_dbldelta
         0.62832E+01    0.60896E+01
         0.00000E+00    0.00000E+00
         0.31416E+01    0.32066E+01
         0.00000E+00    0.00000E+00

# libtetrabz_polstat
         0.38431E+01    0.37810E+01
         0.50265E+01    0.50059E+01
         0.10489E+01    0.10451E+01
         0.17772E+01    0.17602E+01

# libtetrabz_fermigr
         0.13963E+01    0.13905E+01
         0.15696E+01    0.15609E+01
         0.14726E+01    0.14699E+01
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.39262E+00    0.39227E+00
         0.34535E+00    0.34093E+00
         0.00000E+00    0.10928E-02
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00

# libtetrabz_polcmplx
        -0.83824E+00   -0.82081E+00
        -0.73420E+00   -0.75727E+00
         0.27039E+00    0.27000E+00
        -0.77191E+00   -0.75909E+00
         0.97100E+00    0.96102E+00
         0.30279E+00    0.30223E+00
        -0.11600E+01   -0.11552E+01
        -0.77332E+00   -0.77013E+00
         0.29568E+00    0.29446E+00
        -0.11827E+01   -0.11779E+01
         0.15080E+01    0.15018E+01
         0.50265E+00    0.50059E+00
        -0.13077E+00   -0.13009E+00
        -0.87431E-01   -0.88963E-01
         0.30122E-01    0.30575E-01
        -0.13535E+00   -0.13336E+00
         0.17888E+00    0.17653E+00
         0.64232E-01    0.63598E-01
        -0.19139E+00   -0.18956E+00
        -0.10936E+00   -0.10832E+00
         0.27341E-01    0.27081E-01
        -0.21873E+00   -0.21664E+00
         0.30641E+00    0.30349E+00
         0.12256E+00    0.12140E+00

EOF

diff -q test.out test.out.ref

exit $?

