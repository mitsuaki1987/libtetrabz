#!/bin/sh

cat > test.in <<EOF
2 16 8
EOF

${MPIRUN} ./test.x < test.in > test.out

cat > test.out.ref <<EOF
#          Ideal          Result
# libtetrabz_occ
         0.25133E+01    0.27342E+01
         0.44429E+00    0.52281E+00

# libtetrabz_fermieng
         0.50000E+00    0.50001E+00
         0.25133E+01    0.27344E+01
         0.44429E+00    0.52287E+00

# libtetrabz_dos
         0.10053E+00    0.25701E+00
         0.80425E+00    0.10796E+01
         0.27143E+01    0.31247E+01
         0.64340E+01    0.69397E+01
         0.12566E+02    0.13222E+02
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.65827E+00    0.93716E+00
         0.44429E+01    0.49256E+01

# libtetrabz_intdos
         0.80425E-03    0.22258E-02
         0.25736E-01    0.40841E-01
         0.19543E+00    0.24277E+00
         0.82355E+00    0.93854E+00
         0.25133E+01    0.27342E+01
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.18431E-01    0.30728E-01
         0.44429E+00    0.52281E+00

# libtetrabz_dblstep
         0.48106E+00    0.51756E+00
         0.00000E+00    0.00000E+00
         0.12428E+00    0.14246E+00
         0.00000E+00    0.00000E+00

# libtetrabz_dbldelta
         0.62832E+01    0.66298E+01
         0.00000E+00    0.00000E+00
         0.31416E+01    0.35252E+01
         0.00000E+00    0.00000E+00

# libtetrabz_polstat
         0.38431E+01    0.41364E+01
         0.50265E+01    0.54685E+01
         0.10489E+01    0.12224E+01
         0.17772E+01    0.20912E+01

# libtetrabz_fermigr
         0.13963E+01    0.15389E+01
         0.15696E+01    0.17770E+01
         0.14726E+01    0.16065E+01
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.39262E+00    0.47167E+00
         0.34535E+00    0.38944E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00
         0.00000E+00    0.00000E+00

# libtetrabz_polcmplx
        -0.83824E+00   -0.90780E+00
        -0.73420E+00   -0.80092E+00
         0.27039E+00    0.29335E+00
        -0.77191E+00   -0.83629E+00
         0.97100E+00    0.10534E+01
         0.30279E+00    0.32932E+00
        -0.11600E+01   -0.12620E+01
        -0.77332E+00   -0.84130E+00
         0.29568E+00    0.32168E+00
        -0.11827E+01   -0.12867E+01
         0.15080E+01    0.16405E+01
         0.50265E+00    0.54685E+00
        -0.13077E+00   -0.15323E+00
        -0.87431E-01   -0.10300E+00
         0.30122E-01    0.35394E-01
        -0.13535E+00   -0.15828E+00
         0.17888E+00    0.20943E+00
         0.64232E-01    0.75401E-01
        -0.19139E+00   -0.22521E+00
        -0.10936E+00   -0.12869E+00
         0.27341E-01    0.32173E-01
        -0.21873E+00   -0.25738E+00
         0.30641E+00    0.36056E+00
         0.12256E+00    0.14422E+00

EOF

diff -q test.out test.out.ref

exit $?

